# 学习并参与 github 开源项目的正确姿势(入门级)

以 xiaolai 老师的开源项目《the-craft-of-selfteaching》为例：

打开[《the-craft-of-selfteaching》](https://github.com/selfteaching/the-craft-of-selfteaching)，将项目 fork 一份副本 the-craft-of-selfteaching 到自己的 github 帐号，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x01.png)

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x02.png)

打开VScode，再打开 Terminal ，使用命令`git clone`将自己 github 帐号下的副本 clone 到本地，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x03.png)

完成之后，就可以打开本地项目文件 the-craft-of-selfteaching 进行学习并参与其中了，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x04.png)

而我们希望在项目中进行身临其境地学习，对项目肆无忌惮地修改、增减然后运行，再修改、再增减、再运行，同时把学习过程记录下来；又能随时跟进项目进度查看最新版本；还能在发现项目中的错误或者创造了对项目有用的改进时进行提交。

如何在此过程中有序地进行学习和参与而不至于搞得一团乱麻，我们有必要熟悉一些重要的基础操作命令，而在此之前，还需要做一些基本解释，用以更好地理解操作命令。

使用命令`git status`查看本地仓库的状态，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x05.png)

上图中，‘On branch master’ 中的 master，是 本地仓库 的分支，它是在 clone 副本到本地的时候自动生成的分支，我们通常用它来与 xiaolai 老师的项目新版本同步，保持稳定，不做任何修改，以便于参与项目。 origin/master 则可以理解为远程仓库（或服务器） origin 下的 master 分支，它在 fork 时自动生成。

使用命令`git branch -a`查看所有分支，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x06.png)

当前有两个分支，分别是本地的和远程的 master 分支。 `*` 代表目前在本地分支 master 上操作，而 ‘ remotes/origin/HEAD -> origin/master ’ 则表示远程仓库的指针 HEAD 指向远程 master 分支。

使用命令`git remote show origin`查看远程仓库，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x07.png)

只有一个远程仓库 origin 它的路径就是 fork 过来的副本的路径：` https://github.com/SZBillWu/the-craft-of-selfteaching.git` 。需要注意，副本是不会自动与新版本同步的，而我们的本地仓库又是从副本 clone 过来。那么问题来了，我们如何实现与项目的新版本同步呢？

使用命令`git remote add`生成一个远程仓库 upstream （可以自由命名），把它的路径设置成 xiaolai 老师[《the-craft-of-selfteaching》](https://github.com/selfteaching/the-craft-of-selfteaching)项目的路径，我们可以把它称作`源码库` ，再次查看远程仓库，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x08.png)

现在有了`源码库`，我们可以随时更新到最新版了。

使用命令`git fetch upstream`抓取 xiaolai 老师的更新到远程仓库 upstream 中，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x09.png)

上图中我们可以看到仓库 upstream 下生成了新分支 master ，我们再次查看所有分支可以看到：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x10.png)

使用命令`git checkout`切换到本地 master 分支（本地有多个分支时一定要切换），如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x11.png)

使用命令`git merge`将 upstream 下的 master 分支与本地 master 分支合并，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x12.png)

使用命令`git push`将本地已经更新的 master 分支与远程 origin 下的 master 分支同步，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x13.png)

此时，我们已经与项目新版本同步，可以参与项目进行勘误或者改进了。**特别注意，与新版本同步是提交错误修正或改进的前提**。

而在学习过程中，我们通常需要一个能够更加自由发挥、创造的学习环境。下面来新建一个分支 study ，开始玩乐吧。

使用命令`git checkout -b`新建一个本地分支 study 并切换（一定要切换）到 study 下（或者使用命令`git branch`新建 study ，在切换），如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x14.png)

> **在 study 下，你可以随意将内容改着玩了。**

玩的过程中，我们还需要建立一个远程分支，将学习过程和学习记录推送到 origin 保存。

使用命令`git push origin study`将本地 study 分支推送到远程仓库 origin 下，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x15.png)

如果我们继续在本地 study 分支上修修改改，如何将改动时时推送到远程 study 保存呢？

先使用命令`git push --set-upstream origin study`将本地 study 与远程 study 关联起来，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x16.png)

然后使用命令`git add .` ， `git commit -am '注释'` ， `git push`进行推送，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x17.png)

至此，学习的问题解决了，如果我们学习的过程中发现了错误或者有更好创意，怎样参与到项目中去呢？

切换到 master 分支，更新 master 分支到最新版，随便新建一个分支例如 from-SZBillWu ，将它推送到远程 origin 仓库，在本地 from-SZBillWu 下修改错误或做改进，推送到远程 from-SZBillWu（按照顺序来，上面都有相同操作，不再累述），然后在远程分支下`pull requst` , 简要说明改动情况，等待 xiaolai 老师将你的请求并入项目，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x18.png)

并入完成后，本地和远程 from-SZBillWu 分支就都可以删除了。

删除远程分支使用命令`git push origin :from-SZBillWu`（推送一个空分支到远程）或者`git push origin --delete from-SZBillWu` ，如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x19.png)

删除本地分支使用命令`git branch -D from-SZBillWu` （先切换到其他分支才能删除），如下：

![image](https://raw.githubusercontent.com/SZBillWu/MarkdownPhotos/master/x20.png)

>**祝你玩得愉快。**